// koffee 1.3.0

/*
 0000000  00000000   000      000  000000000
000       000   000  000      000     000   
0000000   00000000   000      000     000   
     000  000        000      000     000   
0000000   000        0000000  000     000
 */
var $, Flex, Split, _, event, kerror, post, ref,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), post = ref.post, kerror = ref.kerror, $ = ref.$, _ = ref._;

event = require('events');

Flex = require('./flex/flex');

Split = (function() {
    function Split() {
        this.resized = bind(this.resized, this);
        this.hideTerminal = bind(this.hideTerminal, this);
        this.hideEditor = bind(this.hideEditor, this);
        this.restore = bind(this.restore, this);
        this.stash = bind(this.stash, this);
        this.emitSplit = bind(this.emitSplit, this);
        this.onDrag = bind(this.onDrag, this);
        this.commandlineHeight = 30;
        this.handleHeight = 6;
        this.elem = $('split');
        this.terminal = $('terminal');
        this.browser = $('browser');
        this.commandline = $('commandline');
        this.editor = $('editor');
        post.on('focus', this.focus);
        post.on('stash', this.stash);
        post.on('restore', this.restore);
        this.flex = new Flex({
            panes: [
                {
                    div: this.terminal,
                    collapsed: true
                }, {
                    div: this.commandline,
                    fixed: this.commandlineHeight
                }, {
                    div: this.editor
                }
            ],
            direction: 'vertical',
            handleSize: this.handleHeight,
            onDrag: this.onDrag,
            onDragEnd: this.onDrag,
            onPaneSize: this.onDrag,
            snapFirst: 20,
            snapLast: 100
        });
    }

    Split.prototype.onDrag = function() {
        if (this.flex != null) {
            return this.emitSplit();
        }
    };

    Split.prototype.emitSplit = function() {
        return post.emit('split', this.flex.panePositions());
    };

    Split.prototype.stash = function() {
        window.stash.set('split|flex', this.flex.getState());
        return window.stash.set('split|browser', this.flex.panes[0].div === this.browser);
    };

    Split.prototype.restore = function() {
        var state;
        if (state = window.stash.get('split|flex')) {
            this.flex.restoreState(state);
            this.emitSplit();
        } else {
            this["do"]('maximize editor');
        }
        if (this.flex.panes[0].div !== this.browser && window.stash.get('split|browser')) {
            return this.raise('browser');
        }
    };

    Split.prototype["do"] = function(sentence) {
        var action, delta, pos, what, words;
        sentence = sentence.trim();
        if (!sentence.length) {
            return;
        }
        words = sentence.split(/\s+/);
        action = words[0];
        what = words[1];
        switch (action) {
            case 'show':
                return this.show(what);
            case 'focus':
                return this.focus(what);
            case 'half':
                pos = this.flex.size() / 2;
                break;
            case 'third':
                pos = this.flex.size() / 3;
                break;
            case 'quart':
                pos = this.flex.size() / 4;
                break;
            case 'maximize':
                if (what === 'editor') {
                    return this.maximizeEditor();
                }
                delta = this.flex.size();
                break;
            case 'minimize':
                if (what === 'editor') {
                    return this.minimizeEditor();
                }
                delta = -this.flex.size();
                break;
            case 'enlarge':
                if (words[2] === 'by') {
                    delta = parseInt(words[3]);
                } else {
                    delta = parseInt(0.25 * this.termEditHeight());
                }
                break;
            case 'reduce':
                if (words[2] === 'by') {
                    delta = -parseInt(words[3]);
                } else {
                    delta = -parseInt(0.25 * this.termEditHeight());
                }
                break;
            default:
                return console.error("Split.do -- unknown action '" + action + "'");
        }
        switch (what) {
            case 'editor':
                return this.moveCommandLineBy(-delta);
            case 'terminal':
            case 'browser':
            case 'commandline':
                if (what !== 'commandline') {
                    this.raise(what);
                }
                if (delta != null) {
                    this.moveCommandLineBy(delta);
                }
                if (pos != null) {
                    this.flex.moveHandleToPos(this.flex.handles[0], pos);
                }
                return;
        }
        return console.error("Split.do -- unhandled do command? " + sentence + "?");
    };

    Split.prototype.maximizeEditor = function() {
        this.focus('editor');
        this.flex.expand('editor');
        this.hideCommandline();
        return this.flex.resized();
    };

    Split.prototype.minimizeEditor = function() {
        this.showCommandline();
        this.focus('commandline');
        return this.flex.moveHandleToPos(this.flex.handles[1], this.flex.size());
    };

    Split.prototype.show = function(n) {
        switch (n) {
            case 'terminal':
            case 'browser':
                return this.raise(n);
            case 'editor':
                this.flex.expand('editor');
                if (this.editorHeight() < this.flex.size() / 3) {
                    if (this.flex.handles[1].pos() > this.flex.size() / 3) {
                        this.flex.moveHandleToPos(this.flex.handles[1], this.flex.size() / 3);
                    }
                    if (this.flex.handles[2].pos() < 2 * this.flex.size() / 3) {
                        return this.flex.moveHandleToPos(this.flex.handles[2], 2 * this.flex.size() / 3);
                    }
                }
                break;
            case 'command':
                return this.flex.expand('commandline');
            default:
                return console.error("split.show -- unhandled: " + n + "!");
        }
    };

    Split.prototype.hideEditor = function() {
        return this.flex.collapse('editor');
    };

    Split.prototype.hideTerminal = function() {
        return this.flex.collapse('terminal');
    };

    Split.prototype.swap = function(old, nju) {
        if (this.flex.panes[0].div !== nju) {
            nju.style.height = (this.flex.sizeOfPane(0)) + "px";
            old.style.display = 'none';
            nju.style.display = 'block';
            return this.flex.panes[0].div = nju;
        }
    };

    Split.prototype.raise = function(n) {
        switch (n) {
            case 'terminal':
                this.swap(this.browser, this.terminal);
                break;
            case 'browser':
                this.swap(this.terminal, this.browser);
        }
        this.flex.calculate();
        if (n === 'editor') {
            if (this.editorHeight() < this.flex.size() / 8) {
                return this.flex.moveHandleToPos(this.flex.handles[0], 3 * this.flex.size() / 4);
            }
        } else {
            if (this.terminalHeight() < this.flex.size() / 8) {
                return this.flex.moveHandleToPos(this.flex.handles[0], this.flex.size() / 4);
            }
        }
    };

    Split.prototype.moveCommandLineBy = function(delta) {
        return this.flex.moveHandle({
            index: 1,
            pos: this.flex.posOfHandle(1) + delta
        });
    };

    Split.prototype.hideCommandline = function() {
        if (!this.flex.isCollapsed('commandline')) {
            this.flex.collapse('terminal');
            this.flex.collapse('commandline');
            return post.emit('commandline', 'hidden');
        }
    };

    Split.prototype.showCommandline = function() {
        if (this.flex.isCollapsed('commandline')) {
            this.flex.expand('commandline');
            return post.emit('commandline', 'shown');
        }
    };

    Split.prototype.focus = function(n) {
        var ref1, ref2;
        if (n === 'commandline') {
            n = 'commandline-editor';
        }
        if (n === '.' || ($(n) == null)) {
            return kerror("Split.focus -- can't find element '" + n + "'");
        }
        if (((ref1 = $(n)) != null ? ref1.focus : void 0) != null) {
            window.setLastFocus(n);
        }
        return (ref2 = $(n)) != null ? typeof ref2.focus === "function" ? ref2.focus() : void 0 : void 0;
    };

    Split.prototype.focusAnything = function() {
        if (this.editorVisible()) {
            return this.focus('editor');
        }
        if (this.terminalVisible()) {
            return this.focus('terminal');
        }
        return this.focus('commandline-editor');
    };

    Split.prototype.resized = function() {
        var main;
        main = $('main');
        this.elem.style.width = main.clientWidth + "px";
        this.elem.style.height = main.clientHeight + "px";
        this.flex.resized();
        return this.emitSplit();
    };

    Split.prototype.elemHeight = function() {
        return this.elem.getBoundingClientRect().height - this.handleHeight;
    };

    Split.prototype.splitPosY = function(i) {
        return this.flex.posOfHandle(i);
    };

    Split.prototype.terminalHeight = function() {
        return this.flex.sizeOfPane(0);
    };

    Split.prototype.editorHeight = function() {
        return this.flex.sizeOfPane(2);
    };

    Split.prototype.termEditHeight = function() {
        return this.terminalHeight() + this.commandlineHeight + this.editorHeight();
    };

    Split.prototype.commandlineVisible = function() {
        return !this.flex.isCollapsed('commandline');
    };

    Split.prototype.terminalVisible = function() {
        return !this.flex.isCollapsed('terminal');
    };

    Split.prototype.editorVisible = function() {
        return !this.flex.isCollapsed('editor');
    };

    return Split;

})();

module.exports = Split;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLDJDQUFBO0lBQUE7O0FBUUEsTUFBeUIsT0FBQSxDQUFRLEtBQVIsQ0FBekIsRUFBRSxlQUFGLEVBQVEsbUJBQVIsRUFBZ0IsU0FBaEIsRUFBbUI7O0FBRW5CLEtBQUEsR0FBUSxPQUFBLENBQVEsUUFBUjs7QUFDUixJQUFBLEdBQVEsT0FBQSxDQUFRLGFBQVI7O0FBRUY7SUFRVyxlQUFBOzs7Ozs7OztRQUVULElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtRQUNyQixJQUFDLENBQUEsWUFBRCxHQUFxQjtRQUVyQixJQUFDLENBQUEsSUFBRCxHQUFjLENBQUEsQ0FBRSxPQUFGO1FBQ2QsSUFBQyxDQUFBLFFBQUQsR0FBYyxDQUFBLENBQUUsVUFBRjtRQUNkLElBQUMsQ0FBQSxPQUFELEdBQWMsQ0FBQSxDQUFFLFNBQUY7UUFDZCxJQUFDLENBQUEsV0FBRCxHQUFjLENBQUEsQ0FBRSxhQUFGO1FBQ2QsSUFBQyxDQUFBLE1BQUQsR0FBYyxDQUFBLENBQUUsUUFBRjtRQUVkLElBQUksQ0FBQyxFQUFMLENBQVEsT0FBUixFQUFtQixJQUFDLENBQUEsS0FBcEI7UUFDQSxJQUFJLENBQUMsRUFBTCxDQUFRLE9BQVIsRUFBbUIsSUFBQyxDQUFBLEtBQXBCO1FBQ0EsSUFBSSxDQUFDLEVBQUwsQ0FBUSxTQUFSLEVBQW1CLElBQUMsQ0FBQSxPQUFwQjtRQUVBLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBSSxJQUFKLENBQ0o7WUFBQSxLQUFBLEVBQU87Z0JBQ0M7b0JBQUEsR0FBQSxFQUFZLElBQUMsQ0FBQSxRQUFiO29CQUNBLFNBQUEsRUFBWSxJQURaO2lCQURELEVBSUM7b0JBQUEsR0FBQSxFQUFZLElBQUMsQ0FBQSxXQUFiO29CQUNBLEtBQUEsRUFBWSxJQUFDLENBQUEsaUJBRGI7aUJBSkQsRUFPQztvQkFBQSxHQUFBLEVB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QUksSUFBQyxDQUFBLElBQUksQ0FBQyxXQUFOLENBQWtCLFFBQWxCO0lBQVA7Ozs7OztBQUV4QixNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwICAgICAgMDAwICAwMDAwMDAwMDBcbjAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgMDAwICAgXG4wMDAwMDAwICAgMDAwMDAwMDAgICAwMDAgICAgICAwMDAgICAgIDAwMCAgIFxuICAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgMDAwICAgICAwMDAgICBcbjAwMDAwMDAgICAwMDAgICAgICAgIDAwMDAwMDAgIDAwMCAgICAgMDAwICAgXG4jIyNcblxueyBwb3N0LCBrZXJyb3IsICQsIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxuZXZlbnQgPSByZXF1aXJlICdldmVudHMnXG5GbGV4ICA9IHJlcXVpcmUgJy4vZmxleC9mbGV4J1xuXG5jbGFzcyBTcGxpdFxuICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMDAwXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAwMDAgICBcbiAgICAjIDAwMCAgMDAwIDAgMDAwICAwMDAgICAgIDAwMCAgIFxuICAgICMgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgMDAwICAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcjogKCkgLT5cblxuICAgICAgICBAY29tbWFuZGxpbmVIZWlnaHQgPSAzMFxuICAgICAgICBAaGFuZGxlSGVpZ2h0ICAgICAgPSA2XG4gICAgICAgIFxuICAgICAgICBAZWxlbSAgICAgICAgPSQgJ3NwbGl0J1xuICAgICAgICBAdGVybWluYWwgICAgPSQgJ3Rlcm1pbmFsJ1xuICAgICAgICBAYnJvd3NlciAgICAgPSQgJ2Jyb3dzZXInXG4gICAgICAgIEBjb21tYW5kbGluZSA9JCAnY29tbWFuZGxpbmUnXG4gICAgICAgIEBlZGl0b3IgICAgICA9JCAnZWRpdG9yJ1xuXG4gICAgICAgIHBvc3Qub24gJ2ZvY3VzJywgICBAZm9jdXNcbiAgICAgICAgcG9zdC5vbiAnc3Rhc2gnLCAgIEBzdGFzaFxuICAgICAgICBwb3N0Lm9uICdyZXN0b3JlJywgQHJlc3RvcmVcblxuICAgICAgICBAZmxleCA9IG5ldyBGbGV4XG4gICAgICAgICAgICBwYW5lczogW1xuICAgICAgICAgICAgICAgICAgICBkaXY6ICAgICAgICBAdGVybWluYWxcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiAgdHJ1ZVxuICAgICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgICAgICAgZGl2OiAgICAgICAgQGNvbW1hbmRsaW5lXG4gICAgICAgICAgICAgICAgICAgIGZpeGVkOiAgICAgIEBjb21tYW5kbGluZUhlaWdodFxuICAgICAgICAgICAgICAgICxcbiAgICAgICAgICAgICAgICAgICAgZGl2OiAgICAgICAgQGVkaXRvclxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgZGlyZWN0aW9uOiAgJ3ZlcnRpY2FsJ1xuICAgICAgICAgICAgaGFuZGxlU2l6ZTogQGhhbmRsZUhlaWdodFxuICAgICAgICAgICAgb25EcmFnOiAgICAgQG9uRHJhZ1xuICAgICAgICAgICAgb25EcmFnRW5kOiAgQG9uRHJhZ1xuICAgICAgICAgICAgb25QYW5lU2l6ZTogQG9uRHJhZ1xuICAgICAgICAgICAgc25hcEZpcnN0OiAgMjBcbiAgICAgICAgICAgIHNuYXBMYXN0OiAgIDEwMFxuICAgICAgICAgICAgXG4gICAgb25EcmFnOiA9PiBpZiBAZmxleD8gdGhlbiBAZW1pdFNwbGl0KClcbiAgICBcbiAgICBlbWl0U3BsaXQ6ID0+IHBvc3QuZW1pdCAnc3BsaXQnLCBAZmxleC5wYW5lUG9zaXRpb25zKClcbiAgICBcbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMDAwICBcbiAgICAjICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgIFxuICAgIHN0YXNoOiA9PiBcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5zdGFzaC5zZXQgJ3NwbGl0fGZsZXgnLCBAZmxleC5nZXRTdGF0ZSgpXG4gICAgICAgIHdpbmRvdy5zdGFzaC5zZXQgJ3NwbGl0fGJyb3dzZXInLCBAZmxleC5wYW5lc1swXS5kaXYgPT0gQGJyb3dzZXJcbiAgICAgICAgXG4gICAgcmVzdG9yZTogPT4gXG5cbiAgICAgICAgaWYgc3RhdGUgPSB3aW5kb3cuc3Rhc2guZ2V0ICdzcGxpdHxmbGV4J1xuICAgICAgICAgICAgQGZsZXgucmVzdG9yZVN0YXRlIHN0YXRlXG4gICAgICAgICAgICBAZW1pdFNwbGl0KClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGRvICdtYXhpbWl6ZSBlZGl0b3InXG4gICAgICAgICAgICBcbiAgICAgICAgaWYgQGZsZXgucGFuZXNbMF0uZGl2ICE9IEBicm93c2VyIGFuZCB3aW5kb3cuc3Rhc2guZ2V0ICdzcGxpdHxicm93c2VyJ1xuICAgICAgICAgICAgQHJhaXNlICdicm93c2VyJ1xuICAgICAgICAgICAgICAgIFxuICAgICMgMDAwMDAwMCAgICAgMDAwMDAwMCBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMDAwMDAgICAgIDAwMDAwMDAgXG4gICAgXG4gICAgZG86IChzZW50ZW5jZSkgLT5cbiAgICAgICAgXG4gICAgICAgIHNlbnRlbmNlID0gc2VudGVuY2UudHJpbSgpXG4gICAgICAgIHJldHVybiBpZiBub3Qgc2VudGVuY2UubGVuZ3RoXG4gICAgICAgIHdvcmRzICA9IHNlbnRlbmNlLnNwbGl0IC9cXHMrL1xuICAgICAgICBhY3Rpb24gPSB3b3Jkc1swXVxuICAgICAgICB3aGF0ICAgPSB3b3Jkc1sxXVxuICAgICAgICBzd2l0Y2ggYWN0aW9uXG4gICAgICAgICAgICB3aGVuICdzaG93JyAgICAgdGhlbiByZXR1cm4gQHNob3cgIHdoYXRcbiAgICAgICAgICAgIHdoZW4gJ2ZvY3VzJyAgICB0aGVuIHJldHVybiBAZm9jdXMgd2hhdFxuICAgICAgICAgICAgd2hlbiAnaGFsZicgICAgIHRoZW4gcG9zICAgPSAgQGZsZXguc2l6ZSgpLzJcbiAgICAgICAgICAgIHdoZW4gJ3RoaXJkJyAgICB0aGVuIHBvcyAgID0gIEBmbGV4LnNpemUoKS8zXG4gICAgICAgICAgICB3aGVuICdxdWFydCcgICAgdGhlbiBwb3MgICA9ICBAZmxleC5zaXplKCkvNFxuICAgICAgICAgICAgd2hlbiAnbWF4aW1pemUnIFxuICAgICAgICAgICAgICAgIGlmIHdoYXQgPT0gJ2VkaXRvcicgdGhlbiByZXR1cm4gQG1heGltaXplRWRpdG9yKClcbiAgICAgICAgICAgICAgICBkZWx0YSA9ICBAZmxleC5zaXplKClcbiAgICAgICAgICAgIHdoZW4gJ21pbmltaXplJyBcbiAgICAgICAgICAgICAgICBpZiB3aGF0ID09ICdlZGl0b3InIHRoZW4gcmV0dXJuIEBtaW5pbWl6ZUVkaXRvcigpXG4gICAgICAgICAgICAgICAgZGVsdGEgPSAtQGZsZXguc2l6ZSgpXG4gICAgICAgICAgICB3aGVuICdlbmxhcmdlJ1xuICAgICAgICAgICAgICAgIGlmIHdvcmRzWzJdID09ICdieSdcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSBwYXJzZUludCB3b3Jkc1szXVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSBwYXJzZUludCAwLjI1ICogQHRlcm1FZGl0SGVpZ2h0KClcbiAgICAgICAgICAgIHdoZW4gJ3JlZHVjZSdcbiAgICAgICAgICAgICAgICBpZiB3b3Jkc1syXSA9PSAnYnknXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhID0gLSBwYXJzZUludCB3b3Jkc1szXVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSAtIHBhcnNlSW50IDAuMjUgKiBAdGVybUVkaXRIZWlnaHQoKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gZXJyb3IgXCJTcGxpdC5kbyAtLSB1bmtub3duIGFjdGlvbiAnI3thY3Rpb259J1wiXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBzd2l0Y2ggd2hhdFxuICAgICAgICAgICAgd2hlbiAnZWRpdG9yJyB0aGVuIHJldHVybiBAbW92ZUNvbW1hbmRMaW5lQnkgLWRlbHRhXG4gICAgICAgICAgICB3aGVuICd0ZXJtaW5hbCcsICdicm93c2VyJywgJ2NvbW1hbmRsaW5lJ1xuICAgICAgICAgICAgICAgIEByYWlzZSB3aGF0IGlmIHdoYXQgIT0gJ2NvbW1hbmRsaW5lJ1xuICAgICAgICAgICAgICAgIGlmIGRlbHRhPyB0aGVuIEBtb3ZlQ29tbWFuZExpbmVCeSBkZWx0YVxuICAgICAgICAgICAgICAgIGlmIHBvcz8gdGhlbiBAZmxleC5tb3ZlSGFuZGxlVG9Qb3MgQGZsZXguaGFuZGxlc1swXSwgcG9zXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBlcnJvciBcIlNwbGl0LmRvIC0tIHVuaGFuZGxlZCBkbyBjb21tYW5kPyAje3NlbnRlbmNlfT9cIlxuXG4gICAgbWF4aW1pemVFZGl0b3I6IC0+IFxuICAgICAgICBcbiAgICAgICAgQGZvY3VzICdlZGl0b3InXG4gICAgICAgIEBmbGV4LmV4cGFuZCAnZWRpdG9yJ1xuICAgICAgICBAaGlkZUNvbW1hbmRsaW5lKClcbiAgICAgICAgQGZsZXgucmVzaXplZCgpXG5cbiAgICBtaW5pbWl6ZUVkaXRvcjogLT5cbiAgICAgICAgXG4gICAgICAgIEBzaG93Q29tbWFuZGxpbmUoKVxuICAgICAgICBAZm9jdXMgJ2NvbW1hbmRsaW5lJ1xuICAgICAgICBAZmxleC5tb3ZlSGFuZGxlVG9Qb3MgQGZsZXguaGFuZGxlc1sxXSwgQGZsZXguc2l6ZSgpXG4gICAgICAgICAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgXG4gICAgIyAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwICAgICAwMCAgXG5cbiAgICBzaG93OiAobikgLT5cblxuICAgICAgICBzd2l0Y2ggblxuICAgICAgICAgICAgd2hlbiAndGVybWluYWwnLCAnYnJvd3NlcicgdGhlbiBAcmFpc2UgblxuICAgICAgICAgICAgd2hlbiAnZWRpdG9yJyAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQGZsZXguZXhwYW5kICdlZGl0b3InXG4gICAgICAgICAgICAgICAgaWYgQGVkaXRvckhlaWdodCgpIDwgQGZsZXguc2l6ZSgpLzNcbiAgICAgICAgICAgICAgICAgICAgaWYgQGZsZXguaGFuZGxlc1sxXS5wb3MoKSA+IEBmbGV4LnNpemUoKS8zXG4gICAgICAgICAgICAgICAgICAgICAgICBAZmxleC5tb3ZlSGFuZGxlVG9Qb3MgQGZsZXguaGFuZGxlc1sxXSwgQGZsZXguc2l6ZSgpLzNcbiAgICAgICAgICAgICAgICAgICAgaWYgQGZsZXguaGFuZGxlc1syXS5wb3MoKSA8IDIqQGZsZXguc2l6ZSgpLzNcbiAgICAgICAgICAgICAgICAgICAgICAgIEBmbGV4Lm1vdmVIYW5kbGVUb1BvcyBAZmxleC5oYW5kbGVzWzJdLCAyKkBmbGV4LnNpemUoKS8zXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHdoZW4gJ2NvbW1hbmQnICAgICAgICAgIHRoZW4gQGZsZXguZXhwYW5kICdjb21tYW5kbGluZSdcbiAgICAgICAgICAgIGVsc2UgZXJyb3IgXCJzcGxpdC5zaG93IC0tIHVuaGFuZGxlZDogI3tufSFcIlxuXG4gICAgaGlkZUVkaXRvcjogICAgID0+IEBmbGV4LmNvbGxhcHNlICdlZGl0b3InXG4gICAgaGlkZVRlcm1pbmFsOiAgID0+IEBmbGV4LmNvbGxhcHNlICd0ZXJtaW5hbCdcbiAgICAgICAgICAgIFxuICAgICMgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMCAgXG5cbiAgICBzd2FwOiAob2xkLCBuanUpIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBAZmxleC5wYW5lc1swXS5kaXYgIT0gbmp1XG4gICAgICAgICAgICBuanUuc3R5bGUuaGVpZ2h0ICAgPSBcIiN7QGZsZXguc2l6ZU9mUGFuZSAwfXB4XCJcbiAgICAgICAgICAgIG9sZC5zdHlsZS5kaXNwbGF5ICA9ICdub25lJ1xuICAgICAgICAgICAgbmp1LnN0eWxlLmRpc3BsYXkgID0gJ2Jsb2NrJ1xuICAgICAgICAgICAgQGZsZXgucGFuZXNbMF0uZGl2ID0gbmp1XG5cbiAgICByYWlzZTogKG4pIC0+XG5cbiAgICAgICAgc3dpdGNoIG5cbiAgICAgICAgICAgIHdoZW4gJ3Rlcm1pbmFsJyB0aGVuIEBzd2FwIEBicm93c2VyLCBAdGVybWluYWxcbiAgICAgICAgICAgIHdoZW4gJ2Jyb3dzZXInICB0aGVuIEBzd2FwIEB0ZXJtaW5hbCwgQGJyb3dzZXJcbiAgICAgICAgICAgIFxuICAgICAgICBAZmxleC5jYWxjdWxhdGUoKVxuXG4gICAgICAgIGlmIG4gPT0gJ2VkaXRvcidcbiAgICAgICAgICAgIGlmIEBlZGl0b3JIZWlnaHQoKSA8IEBmbGV4LnNpemUoKS84XG4gICAgICAgICAgICAgICAgQGZsZXgubW92ZUhhbmRsZVRvUG9zIEBmbGV4LmhhbmRsZXNbMF0sIDMqQGZsZXguc2l6ZSgpLzRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaWYgQHRlcm1pbmFsSGVpZ2h0KCkgPCBAZmxleC5zaXplKCkvOFxuICAgICAgICAgICAgICAgIEBmbGV4Lm1vdmVIYW5kbGVUb1BvcyBAZmxleC5oYW5kbGVzWzBdLCBAZmxleC5zaXplKCkvNFxuXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMCAgICAgMDAgIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwICAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwXG4gICAgXG4gICAgbW92ZUNvbW1hbmRMaW5lQnk6IChkZWx0YSkgLT5cbiAgICAgICAgXG4gICAgICAgIEBmbGV4Lm1vdmVIYW5kbGUgaW5kZXg6MSwgcG9zOkBmbGV4LnBvc09mSGFuZGxlKDEpICsgZGVsdGFcbiAgICAgICAgXG4gICAgaGlkZUNvbW1hbmRsaW5lOiAtPiBcbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBAZmxleC5pc0NvbGxhcHNlZCAnY29tbWFuZGxpbmUnXG4gICAgICAgICAgICBAZmxleC5jb2xsYXBzZSAndGVybWluYWwnXG4gICAgICAgICAgICBAZmxleC5jb2xsYXBzZSAnY29tbWFuZGxpbmUnXG4gICAgICAgICAgICBwb3N0LmVtaXQgJ2NvbW1hbmRsaW5lJywgJ2hpZGRlbidcbiAgICAgICAgXG4gICAgc2hvd0NvbW1hbmRsaW5lOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgQGZsZXguaXNDb2xsYXBzZWQgJ2NvbW1hbmRsaW5lJ1xuICAgICAgICAgICAgQGZsZXguZXhwYW5kICdjb21tYW5kbGluZSdcbiAgICAgICAgICAgIHBvc3QuZW1pdCAnY29tbWFuZGxpbmUnLCAnc2hvd24nXG5cbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgIFxuICAgICMgMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgICAgMDAwXG4gICAgIyAwMDAgICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwIFxuICAgIFxuICAgIGZvY3VzOiAobikgLT5cbiAgICAgICAgXG4gICAgICAgIG4gPSAnY29tbWFuZGxpbmUtZWRpdG9yJyBpZiBuID09ICdjb21tYW5kbGluZSdcbiAgICAgICAgaWYgbiA9PSAnLicgb3Igbm90ICQobik/XG4gICAgICAgICAgICByZXR1cm4ga2Vycm9yIFwiU3BsaXQuZm9jdXMgLS0gY2FuJ3QgZmluZCBlbGVtZW50ICcje259J1wiXG4gICAgICAgICAgICBcbiAgICAgICAgd2luZG93LnNldExhc3RGb2N1cyBuIGlmICQobik/LmZvY3VzP1xuICAgICAgICAkKG4pPy5mb2N1cz8oKVxuICAgICAgICAgICAgXG4gICAgZm9jdXNBbnl0aGluZzogLT5cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBAZm9jdXMgJ2VkaXRvcicgICBpZiBAZWRpdG9yVmlzaWJsZSgpXG4gICAgICAgIHJldHVybiBAZm9jdXMgJ3Rlcm1pbmFsJyBpZiBAdGVybWluYWxWaXNpYmxlKClcbiAgICAgICAgQGZvY3VzICdjb21tYW5kbGluZS1lZGl0b3InXG5cbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgICAwMDBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICBcbiAgICBcbiAgICByZXNpemVkOiA9PlxuICAgICAgICBcbiAgICAgICAgbWFpbiA9JCAnbWFpbidcbiAgICAgICAgQGVsZW0uc3R5bGUud2lkdGggID0gXCIje21haW4uY2xpZW50V2lkdGh9cHhcIlxuICAgICAgICBAZWxlbS5zdHlsZS5oZWlnaHQgPSBcIiN7bWFpbi5jbGllbnRIZWlnaHR9cHhcIlxuICAgICAgICBAZmxleC5yZXNpemVkKClcbiAgICAgICAgQGVtaXRTcGxpdCgpXG4gICAgXG4gICAgIyAwMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAgICAgICAgMDAwMDAwMCAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgIDAgICAgMDAwICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICBcbiAgICAjIDAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAgIDAwMDAwMDAgICAwMDAgICAgMDAwICAgIDAwMDAwMDAgXG4gICAgIyAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgICAgMCAgICAgICAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgICAgICAgMDAwMDAwMCAgIDAwMCAgMDAwMDAwMCAgMDAwMDAwMDBcbiAgICBcbiAgICBlbGVtSGVpZ2h0OiAtPiBAZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLSBAaGFuZGxlSGVpZ2h0XG4gICAgXG4gICAgc3BsaXRQb3NZOiAgKGkpIC0+IEBmbGV4LnBvc09mSGFuZGxlIGlcbiAgICB0ZXJtaW5hbEhlaWdodDogLT4gQGZsZXguc2l6ZU9mUGFuZSAwXG4gICAgZWRpdG9ySGVpZ2h0OiAgIC0+IEBmbGV4LnNpemVPZlBhbmUgMlxuICAgIHRlcm1FZGl0SGVpZ2h0OiAtPiBAdGVybWluYWxIZWlnaHQoKSArIEBjb21tYW5kbGluZUhlaWdodCArIEBlZGl0b3JIZWlnaHQoKVxuICAgICAgICBcbiAgICBjb21tYW5kbGluZVZpc2libGU6IC0+IG5vdCBAZmxleC5pc0NvbGxhcHNlZCAnY29tbWFuZGxpbmUnXG4gICAgdGVybWluYWxWaXNpYmxlOiAgICAtPiBub3QgQGZsZXguaXNDb2xsYXBzZWQgJ3Rlcm1pbmFsJ1xuICAgIGVkaXRvclZpc2libGU6ICAgICAgLT4gbm90IEBmbGV4LmlzQ29sbGFwc2VkICdlZGl0b3InXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBTcGxpdFxuIl19
//# sourceURL=../../coffee/win/split.coffee