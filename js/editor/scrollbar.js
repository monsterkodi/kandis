// koffee 1.7.0

/*
 0000000   0000000  00000000    0000000   000      000      0000000     0000000   00000000
000       000       000   000  000   000  000      000      000   000  000   000  000   000
0000000   000       0000000    000   000  000      000      0000000    000000000  0000000
     000  000       000   000  000   000  000      000      000   000  000   000  000   000
0000000    0000000  000   000   0000000   0000000  0000000  0000000    000   000  000   000
 */
var Scrollbar, clamp, drag, elem, ref, scheme, stopEvent,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ref = require('kxk'), clamp = ref.clamp, drag = ref.drag, elem = ref.elem, scheme = ref.scheme, stopEvent = ref.stopEvent;

scheme = require('../tools/scheme');

Scrollbar = (function() {
    function Scrollbar(editor) {
        this.editor = editor;
        this.update = bind(this.update, this);
        this.wheelScroll = bind(this.wheelScroll, this);
        this.onWheel = bind(this.onWheel, this);
        this.onDrag = bind(this.onDrag, this);
        this.onStart = bind(this.onStart, this);
        this.editor.scroll.on('scroll', this.update);
        this.editor.on('linesShown', this.update);
        this.editor.on('viewHeight', this.update);
        this.elem = elem({
            "class": 'scrollbar left'
        });
        this.editor.view.appendChild(this.elem);
        this.handle = elem({
            "class": 'scrollhandle left'
        });
        this.elem.appendChild(this.handle);
        this.scrollX = 0;
        this.scrollY = 0;
        this.scrollDelta = 0;
        this.drag = new drag({
            target: this.elem,
            onStart: this.onStart,
            onMove: this.onDrag,
            cursor: 'ns-resize'
        });
        this.elem.addEventListener('wheel', this.onWheel);
        this.editor.view.addEventListener('wheel', this.onWheel);
    }

    Scrollbar.prototype.del = function() {
        this.elem.removeEventListener('wheel', this.onWheel);
        return this.editor.view.removeEventListener('wheel', this.onWheel);
    };

    Scrollbar.prototype.onStart = function(drag, event) {
        var br, ln, ly, sy;
        br = this.elem.getBoundingClientRect();
        sy = clamp(0, this.editor.scroll.viewHeight, event.clientY - br.top);
        ln = parseInt(this.editor.scroll.numLines * sy / this.editor.scroll.viewHeight);
        ly = (ln - this.editor.scroll.viewLines / 2) * this.editor.scroll.lineHeight;
        return this.editor.scroll.to(ly);
    };

    Scrollbar.prototype.onDrag = function(drag) {
        var scroll;
        this.scrollDelta += (drag.delta.y / (this.editor.scroll.viewLines * this.editor.scroll.lineHeight)) * this.editor.scroll.fullHeight;
        scroll = (function(_this) {
            return function() {
                _this.editor.scroll.by(_this.scrollDelta);
                return _this.scrollDelta = 0;
            };
        })(this);
        clearImmediate(this.scrollTimer);
        return this.scrollTimer = setImmediate(scroll);
    };

    Scrollbar.prototype.onWheel = function(event) {
        var scrollFactor;
        scrollFactor = function() {
            var f;
            f = 1;
            f *= 1 + 1 * event.shiftKey;
            f *= 1 + 3 * event.metaKey;
            return f *= 1 + 7 * event.altKey;
        };
        if (Math.abs(event.deltaX) >= 2 * Math.abs(event.deltaY) || Math.abs(event.deltaY) === 0) {
            this.scrollX += event.deltaX;
        } else {
            this.scrollY += event.deltaY * scrollFactor();
        }
        if (this.scrollX || this.scrollY) {
            window.requestAnimationFrame(this.wheelScroll);
        }
        return stopEvent(event);
    };

    Scrollbar.prototype.wheelScroll = function() {
        this.editor.scroll.by(this.scrollY, this.scrollX);
        return this.scrollX = this.scrollY = 0;
    };

    Scrollbar.prototype.update = function() {
        var bh, cf, cs, longColor, scrollHeight, scrollTop, shortColor, vh;
        if (this.editor.numLines() * this.editor.size.lineHeight < this.editor.viewHeight()) {
            this.handle.style.top = "0";
            this.handle.style.height = "0";
            return this.handle.style.width = "0";
        } else {
            bh = this.editor.numLines() * this.editor.size.lineHeight;
            vh = Math.min(this.editor.scroll.viewLines * this.editor.scroll.lineHeight, this.editor.viewHeight());
            scrollTop = parseInt((this.editor.scroll.scroll / bh) * vh);
            scrollHeight = parseInt(((this.editor.scroll.viewLines * this.editor.scroll.lineHeight) / bh) * vh);
            scrollHeight = Math.max(scrollHeight, parseInt(this.editor.size.lineHeight / 4));
            scrollTop = Math.min(scrollTop, this.editor.viewHeight() - scrollHeight);
            scrollTop = Math.max(0, scrollTop);
            this.handle.style.top = scrollTop + "px";
            this.handle.style.height = scrollHeight + "px";
            this.handle.style.width = "2px";
            cf = 1 - clamp(0, 1, (scrollHeight - 10) / 200);
            longColor = scheme.colorForClass('scrollbar long');
            shortColor = scheme.colorForClass('scrollbar short');
            cs = scheme.fadeColor(longColor, shortColor, cf);
            return this.handle.style.backgroundColor = cs;
        }
    };

    return Scrollbar;

})();

module.exports = Scrollbar;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQSxvREFBQTtJQUFBOztBQVFBLE1BQTJDLE9BQUEsQ0FBUSxLQUFSLENBQTNDLEVBQUUsaUJBQUYsRUFBUyxlQUFULEVBQWUsZUFBZixFQUFxQixtQkFBckIsRUFBNkI7O0FBRTdCLE1BQUEsR0FBUyxPQUFBLENBQVEsaUJBQVI7O0FBRUg7SUFFQyxtQkFBQyxNQUFEO1FBQUMsSUFBQyxDQUFBLFNBQUQ7Ozs7OztRQUVBLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQWYsQ0FBa0IsUUFBbEIsRUFBMkIsSUFBQyxDQUFBLE1BQTVCO1FBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxFQUFSLENBQVcsWUFBWCxFQUEyQixJQUFDLENBQUEsTUFBNUI7UUFDQSxJQUFDLENBQUEsTUFBTSxDQUFDLEVBQVIsQ0FBVyxZQUFYLEVBQTJCLElBQUMsQ0FBQSxNQUE1QjtRQUVBLElBQUMsQ0FBQSxJQUFELEdBQVEsSUFBQSxDQUFLO1lBQUEsQ0FBQSxLQUFBLENBQUEsRUFBTyxnQkFBUDtTQUFMO1FBQ1IsSUFBQyxDQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBYixDQUF5QixJQUFDLENBQUEsSUFBMUI7UUFFQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBQUEsQ0FBSztZQUFBLENBQUEsS0FBQSxDQUFBLEVBQU8sbUJBQVA7U0FBTDtRQUNWLElBQUMsQ0FBQSxJQUFJLENBQUMsV0FBTixDQUFrQixJQUFDLENBQUEsTUFBbkI7UUFFQSxJQUFDLENBQUEsT0FBRCxHQUFZO1FBQ1osSUFBQyxDQUFBLE9BQUQsR0FBWTtRQUNaLElBQUMsQ0FBQSxXQUFELEdBQWU7UUFFZixJQUFDLENBQUEsSUFBRCxHQUFRLElBQUksSUFBSixDQUNKO1lBQUEsTUFBQSxFQUFTLElBQUMsQ0FBQSxJQUFWO1lBQ0EsT0FBQSxFQUFT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LE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZCxHQUFnQyxHQXhCcEM7O0lBRkk7Ozs7OztBQTRCWixNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgICAgMDAwICAgICAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMDAwMDAwXG4wMDAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwMDAwMFxuICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyMjXG5cbnsgY2xhbXAsIGRyYWcsIGVsZW0sIHNjaGVtZSwgc3RvcEV2ZW50IH0gPSByZXF1aXJlICdreGsnXG5cbnNjaGVtZSA9IHJlcXVpcmUgJy4uL3Rvb2xzL3NjaGVtZSdcblxuY2xhc3MgU2Nyb2xsYmFyXG5cbiAgICBAOiAoQGVkaXRvcikgLT5cblxuICAgICAgICBAZWRpdG9yLnNjcm9sbC5vbiAnc2Nyb2xsJyBAdXBkYXRlXG4gICAgICAgIEBlZGl0b3Iub24gJ2xpbmVzU2hvd24nICAgIEB1cGRhdGVcbiAgICAgICAgQGVkaXRvci5vbiAndmlld0hlaWdodCcgICAgQHVwZGF0ZVxuXG4gICAgICAgIEBlbGVtID0gZWxlbSBjbGFzczogJ3Njcm9sbGJhciBsZWZ0J1xuICAgICAgICBAZWRpdG9yLnZpZXcuYXBwZW5kQ2hpbGQgQGVsZW1cblxuICAgICAgICBAaGFuZGxlID0gZWxlbSBjbGFzczogJ3Njcm9sbGhhbmRsZSBsZWZ0J1xuICAgICAgICBAZWxlbS5hcHBlbmRDaGlsZCBAaGFuZGxlXG5cbiAgICAgICAgQHNjcm9sbFggID0gMFxuICAgICAgICBAc2Nyb2xsWSAgPSAwXG4gICAgICAgIEBzY3JvbGxEZWx0YSA9IDBcblxuICAgICAgICBAZHJhZyA9IG5ldyBkcmFnXG4gICAgICAgICAgICB0YXJnZXQ6ICBAZWxlbVxuICAgICAgICAgICAgb25TdGFydDogQG9uU3RhcnRcbiAgICAgICAgICAgIG9uTW92ZTogIEBvbkRyYWdcbiAgICAgICAgICAgIGN1cnNvcjogICducy1yZXNpemUnXG5cbiAgICAgICAgQGVsZW0gICAgICAgLmFkZEV2ZW50TGlzdGVuZXIgJ3doZWVsJyBAb25XaGVlbFxuICAgICAgICBAZWRpdG9yLnZpZXcuYWRkRXZlbnRMaXN0ZW5lciAnd2hlZWwnIEBvbldoZWVsXG5cbiAgICBkZWw6IC0+XG4gICAgICAgIFxuICAgICAgICBAZWxlbSAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lciAnd2hlZWwnIEBvbldoZWVsXG4gICAgICAgIEBlZGl0b3Iudmlldy5yZW1vdmVFdmVudExpc3RlbmVyICd3aGVlbCcgQG9uV2hlZWxcblxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAwMFxuICAgICMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAwMDAwMDAwICAgICAgIDAwMFxuICAgICMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMFxuXG4gICAgb25TdGFydDogKGRyYWcsIGV2ZW50KSA9PlxuXG4gICAgICAgIGJyID0gQGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgc3kgPSBjbGFtcCAwLCBAZWRpdG9yLnNjcm9sbC52aWV3SGVpZ2h0LCBldmVudC5jbGllbnRZIC0gYnIudG9wXG4gICAgICAgIGxuID0gcGFyc2VJbnQgQGVkaXRvci5zY3JvbGwubnVtTGluZXMgKiBzeS9AZWRpdG9yLnNjcm9sbC52aWV3SGVpZ2h0XG4gICAgICAgIGx5ID0gKGxuIC0gQGVkaXRvci5zY3JvbGwudmlld0xpbmVzIC8gMikgKiBAZWRpdG9yLnNjcm9sbC5saW5lSGVpZ2h0XG4gICAgICAgIEBlZGl0b3Iuc2Nyb2xsLnRvIGx5XG5cbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMFxuXG4gICAgb25EcmFnOiAoZHJhZykgPT5cblxuICAgICAgICBAc2Nyb2xsRGVsdGEgKz0gKGRyYWcuZGVsdGEueSAvIChAZWRpdG9yLnNjcm9sbC52aWV3TGluZXMgKiBAZWRpdG9yLnNjcm9sbC5saW5lSGVpZ2h0KSkgKiBAZWRpdG9yLnNjcm9sbC5mdWxsSGVpZ2h0XG4gICAgICAgIFxuICAgICAgICBzY3JvbGwgPSA9PlxuICAgICAgICAgICAgQGVkaXRvci5zY3JvbGwuYnkgQHNjcm9sbERlbHRhXG4gICAgICAgICAgICBAc2Nyb2xsRGVsdGEgPSAwXG4gICAgICAgIFxuICAgICAgICBjbGVhckltbWVkaWF0ZSBAc2Nyb2xsVGltZXJcbiAgICAgICAgQHNjcm9sbFRpbWVyID0gc2V0SW1tZWRpYXRlIHNjcm9sbFxuXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDBcbiAgICAjIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDBcbiAgICAjIDAwICAgICAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDBcblxuICAgIG9uV2hlZWw6IChldmVudCkgPT5cblxuICAgICAgICBzY3JvbGxGYWN0b3IgPSAtPlxuICAgICAgICAgICAgZiAgPSAxXG4gICAgICAgICAgICBmICo9IDEgKyAxICogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgICAgIGYgKj0gMSArIDMgKiBldmVudC5tZXRhS2V5XG4gICAgICAgICAgICBmICo9IDEgKyA3ICogZXZlbnQuYWx0S2V5XG5cbiAgICAgICAgaWYgTWF0aC5hYnMoZXZlbnQuZGVsdGFYKSA+PSAyKk1hdGguYWJzKGV2ZW50LmRlbHRhWSkgb3IgTWF0aC5hYnMoZXZlbnQuZGVsdGFZKSA9PSAwXG4gICAgICAgICAgICBAc2Nyb2xsWCArPSBldmVudC5kZWx0YVhcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQHNjcm9sbFkgKz0gZXZlbnQuZGVsdGFZICogc2Nyb2xsRmFjdG9yKClcblxuICAgICAgICBpZiBAc2Nyb2xsWCBvciBAc2Nyb2xsWVxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSBAd2hlZWxTY3JvbGxcblxuICAgICAgICBzdG9wRXZlbnQgZXZlbnRcblxuICAgIHdoZWVsU2Nyb2xsOiA9PlxuXG4gICAgICAgIEBlZGl0b3Iuc2Nyb2xsLmJ5IEBzY3JvbGxZLCBAc2Nyb2xsWFxuICAgICAgICBAc2Nyb2xsWCA9IEBzY3JvbGxZID0gMFxuXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgICAgMDAwICAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMCAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwMDAwMDBcblxuICAgIHVwZGF0ZTogPT5cblxuICAgICAgICBpZiBAZWRpdG9yLm51bUxpbmVzKCkgKiBAZWRpdG9yLnNpemUubGluZUhlaWdodCA8IEBlZGl0b3Iudmlld0hlaWdodCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUudG9wICAgICA9IFwiMFwiXG4gICAgICAgICAgICBAaGFuZGxlLnN0eWxlLmhlaWdodCAgPSBcIjBcIlxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS53aWR0aCAgID0gXCIwXCJcbiAgICAgICAgICAgIFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJoICAgICAgICAgICA9IEBlZGl0b3IubnVtTGluZXMoKSAqIEBlZGl0b3Iuc2l6ZS5saW5lSGVpZ2h0XG4gICAgICAgICAgICB2aCAgICAgICAgICAgPSBNYXRoLm1pbiAoQGVkaXRvci5zY3JvbGwudmlld0xpbmVzICogQGVkaXRvci5zY3JvbGwubGluZUhlaWdodCksIEBlZGl0b3Iudmlld0hlaWdodCgpXG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBwYXJzZUludCAoQGVkaXRvci5zY3JvbGwuc2Nyb2xsIC8gYmgpICogdmhcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IHBhcnNlSW50ICgoQGVkaXRvci5zY3JvbGwudmlld0xpbmVzICogQGVkaXRvci5zY3JvbGwubGluZUhlaWdodCkgLyBiaCkgKiB2aFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gTWF0aC5tYXggc2Nyb2xsSGVpZ2h0LCBwYXJzZUludCBAZWRpdG9yLnNpemUubGluZUhlaWdodC80XG4gICAgICAgICAgICBzY3JvbGxUb3AgICAgPSBNYXRoLm1pbiBzY3JvbGxUb3AsIEBlZGl0b3Iudmlld0hlaWdodCgpLXNjcm9sbEhlaWdodFxuICAgICAgICAgICAgc2Nyb2xsVG9wICAgID0gTWF0aC5tYXggMCwgc2Nyb2xsVG9wXG5cbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUudG9wICAgID0gXCIje3Njcm9sbFRvcH1weFwiXG4gICAgICAgICAgICBAaGFuZGxlLnN0eWxlLmhlaWdodCA9IFwiI3tzY3JvbGxIZWlnaHR9cHhcIlxuICAgICAgICAgICAgQGhhbmRsZS5zdHlsZS53aWR0aCAgPSBcIjJweFwiXG5cbiAgICAgICAgICAgIGNmID0gMSAtIGNsYW1wIDAsIDEsIChzY3JvbGxIZWlnaHQtMTApLzIwMFxuICAgICAgICAgICAgbG9uZ0NvbG9yICA9IHNjaGVtZS5jb2xvckZvckNsYXNzICdzY3JvbGxiYXIgbG9uZydcbiAgICAgICAgICAgIHNob3J0Q29sb3IgPSBzY2hlbWUuY29sb3JGb3JDbGFzcyAnc2Nyb2xsYmFyIHNob3J0J1xuICAgICAgICAgICAgY3MgPSBzY2hlbWUuZmFkZUNvbG9yIGxvbmdDb2xvciwgc2hvcnRDb2xvciwgY2ZcbiAgICAgICAgICAgIEBoYW5kbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY3NcblxubW9kdWxlLmV4cG9ydHMgPSBTY3JvbGxiYXJcbiJdfQ==
//# sourceURL=../../coffee/editor/scrollbar.coffee