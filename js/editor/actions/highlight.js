// koffee 1.11.0
var _, empty, klog, post, ref,
    indexOf = [].indexOf;

ref = require('kxk'), _ = ref._, empty = ref.empty, klog = ref.klog, post = ref.post;

module.exports = {
    actions: {
        menu: 'Select',
        highlightWordAndAddToSelection: {
            name: 'Highlight and Select Word',
            text: 'highlights all occurrences of text in selection or word at cursor and selects the first|next highlight.',
            combo: 'command+d',
            accel: 'ctrl+d'
        },
        selectAllWords: {
            name: 'Select All Words',
            combo: 'command+alt+d',
            accel: 'alt+ctrl+d'
        },
        removeSelectedHighlight: {
            name: 'Remove Highlighted Word from Selection',
            text: "does the inverse of 'highlight and select' word",
            combo: 'command+shift+d',
            accel: 'ctrl+shift+d'
        },
        highlightTextOfSelectionOrWordAtCursor: {
            name: 'Highlight and Select Word',
            text: 'highlights all occurrences of text in selection or word at cursor and selects it. expands to the left if already selected.',
            combo: 'command+e',
            accel: 'ctrl+e'
        }
    },
    highlightText: function(text, opt) {
        var hls, ref1, ref2;
        hls = this.rangesForText(text, opt);
        if (hls.length) {
            switch (opt != null ? opt.select : void 0) {
                case 'after':
                    this.selectSingleRange((ref1 = rangeAfterPosInRanges(this.cursorPos(), hls)) != null ? ref1 : _.first(hls));
                    break;
                case 'before':
                    this.selectSingleRange((ref2 = rangeBeforePosInRanges(this.cursorPos(), hls)) != null ? ref2 : _.first(hls));
                    break;
                case 'first':
                    this.selectSingleRange(_.first(hls));
            }
        }
        this.setHighlights(hls);
        this.renderHighlights();
        return this.emit('highlight');
    },
    wordHighlights: function() {
        return this.highlights().filter(function(h) {
            var ref1, ref2, ref3, ref4;
            return !((ref1 = h[2]) != null ? (ref2 = ref1.clss) != null ? ref2.startsWith('stringmatch') : void 0 : void 0) && !((ref3 = h[2]) != null ? (ref4 = ref3.clss) != null ? ref4.startsWith('bracketmatch') : void 0 : void 0);
        });
    },
    selectAllWords: function() {
        var editor, ref1, ref2;
        if (this.name === 'commandline-editor') {
            if (editor = (ref1 = window.commandline) != null ? (ref2 = ref1.command) != null ? ref2.receivingEditor() : void 0 : void 0) {
                editor.selectAllWords();
                editor.focus();
                return;
            }
        }
        this.highlightWordAndAddToSelection();
        this["do"].start();
        this["do"].select(this["do"].highlights());
        if (this["do"].numSelections()) {
            this["do"].setCursors(endPositionsFromRanges(this["do"].selections()), {
                main: 'closest'
            });
        }
        return this["do"].end();
    },
    highlightWordAndAddToSelection: function() {
        var cp, cursorInWordHighlight, r, sr, wordHighlights;
        cp = this.cursorPos();
        wordHighlights = this.wordHighlights();
        cursorInWordHighlight = wordHighlights.length && rangeAtPosInRanges(cp, wordHighlights);
        if (!cursorInWordHighlight) {
            return this.highlightTextOfSelectionOrWordAtCursor();
        } else {
            this["do"].start();
            sr = rangeAtPosInRanges(cp, this["do"].selections());
            if (sr) {
                r = rangeAfterPosInRanges(cp, wordHighlights);
            } else {
                r = rangeAtPosInRanges(cp, wordHighlights);
            }
            if (r != null) {
                r;
            } else {
                r = wordHighlights[0];
            }
            this.addRangeToSelection(r);
            return this["do"].end();
        }
    },
    highlightTextOfSelectionOrWordAtCursor: function() {
        var largerRange, largerText, nr, nt, ref1, ref2, sel, srange, text;
        if (this.numSelections() === 0) {
            srange = this.rangeForRealWordAtPos(this.cursorPos());
            if (empty(this.textInRange(srange).trim())) {
                this.clearHighlights();
                this.selectNone();
                return;
            }
            this.selectSingleRange(srange);
        }
        sel = this.selection(0);
        text = this.textInRange(sel);
        if (text.length) {
            if (this.numHighlights()) {
                if (text === this.textInRange(this.highlight(0))) {
                    largerRange = [sel[0], [sel[1][0] - 1, sel[1][1]]];
                    largerText = this.textInRange(largerRange);
                    if ((ref1 = largerText[0], indexOf.call("@#$%&*+-!?:.'\"/", ref1) >= 0) || /[A-Za-z]/.test(largerText[0])) {
                        if (ref2 = largerText[0], indexOf.call("'\"", ref2) >= 0) {
                            nr = [sel[0], [sel[1][0] - 1, sel[1][1] + 1]];
                            nt = this.textInRange(nr);
                            if (nt[nt.length - 1] === largerText[0]) {
                                largerText = nt;
                                largerRange = nr;
                            }
                        } else if (/[A-Za-z]/.test(largerText[0])) {
                            while (largerRange[1][0] > 0 && /[A-Za-z]/.test(this.line(largerRange[0])[largerRange[1][0] - 1])) {
                                largerRange[1][0] -= 1;
                                largerText = this.textInRange(largerRange);
                            }
                        }
                        text = largerText;
                        if (this.numSelections() === 1) {
                            klog('largerRange ----------- ', largerRange);
                            this.selectSingleRange(largerRange);
                        }
                    }
                }
            }
            this.setHighlights(this.rangesForText(text, {
                max: 9999
            }));
            if (this.renderHighlights != null) {
                this.renderHighlights();
                this.emit('highlight');
                post.emit('searchText', text);
                return this.focus();
            }
        }
    },
    clearHighlights: function() {
        if (this.numHighlights()) {
            this.setHighlights([]);
            return this.emit('highlight');
        }
    },
    removeSelectedHighlight: function() {
        var cp, hr, sel, sr;
        cp = this.cursorPos();
        sel = this.selections();
        sr = rangeAtPosInRanges(cp, sel);
        hr = rangeAtPosInRanges(cp, this.highlights());
        if (sr && hr) {
            return this.removeSelectionAtIndex(sel.indexOf(sr));
        }
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlnaGxpZ2h0LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uL2NvZmZlZS9lZGl0b3IvYWN0aW9ucyIsInNvdXJjZXMiOlsiaGlnaGxpZ2h0LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBT0EsSUFBQSx5QkFBQTtJQUFBOztBQUFBLE1BQTJCLE9BQUEsQ0FBUSxLQUFSLENBQTNCLEVBQUUsU0FBRixFQUFLLGlCQUFMLEVBQVksZUFBWixFQUFrQjs7QUFFbEIsTUFBTSxDQUFDLE9BQVAsR0FFSTtJQUFBLE9BQUEsRUFDSTtRQUFBLElBQUEsRUFBTSxRQUFOO1FBRUEsOEJBQUEsRUFDSTtZQUFBLElBQUEsRUFBTywyQkFBUDtZQUNBLElBQUEsRUFBTyx5R0FEUDtZQUVBLEtBQUEsRUFBTyxXQUZQO1lBR0EsS0FBQSxFQUFPLFFBSFA7U0FISjtRQVFBLGNBQUEsRUFDSTtZQUFBLElBQUEsRUFBTyxrQkFBUDtZQUNBLEtBQUEsRUFBTyxlQURQO1lBRUEsS0FBQSxFQUFPLFlBRlA7U0FUSjtRQWFBLHVCQUFBLEVBQ0k7WUFBQSxJQUFBLEVBQU0sd0NBQU47WUFDQSxJQUFBLEVBQU8saURBRFA7WUFFQSxLQUFBLEVBQU8saUJBRlA7WUFHQSxLQUFBLEVBQU8sY0FIUDtTQWRKO1FBbUJBLHNDQUFBLEVBQ0k7WUFBQSxJQUFBLEVBQU8sMkJBQVA7WUFDQSxJQUFBLEVBQU8sNEhBRFA7WUFFQSxLQUFBLEVBQU8sV0FGUDtZQUdBLEtBQUEsRUFBTyxRQUhQO1NBcEJKO0tBREo7SUFnQ0EsYUFBQSxFQUFlLFNBQUMsSUFBRCxFQUFPLEdBQVA7QUFFWCxZQUFBO1FBQUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxhQUFELENBQWUsSUFBZixFQUFxQixHQUFyQjtRQUNOLElBQUcsR0FBRyxDQUFDLE1BQVA7QUFDSSxrQ0FBTyxHQUFHLENBQUUsZUFBWjtBQUFBLHFCQUNTLE9BRFQ7b0JBQ3VCLElBQUMsQ0FBQSxpQkFBRCx3RUFBOEQsQ0FBQyxDQUFDLEtBQUYsQ0FB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QUF2Qjt1QkFDQSxJQUFDLENBQUEsS0FBRCxDQUFBLEVBSko7YUF6Qko7O0lBWm9DLENBM0Z4QztJQTRJQSxlQUFBLEVBQWlCLFNBQUE7UUFFYixJQUFHLElBQUMsQ0FBQSxhQUFELENBQUEsQ0FBSDtZQUNJLElBQUMsQ0FBQSxhQUFELENBQWUsRUFBZjttQkFDQSxJQUFDLENBQUEsSUFBRCxDQUFNLFdBQU4sRUFGSjs7SUFGYSxDQTVJakI7SUF3SkEsdUJBQUEsRUFBeUIsU0FBQTtBQUVyQixZQUFBO1FBQUEsRUFBQSxHQUFLLElBQUMsQ0FBQSxTQUFELENBQUE7UUFDTCxHQUFBLEdBQU0sSUFBQyxDQUFBLFVBQUQsQ0FBQTtRQUNOLEVBQUEsR0FBSyxrQkFBQSxDQUFtQixFQUFuQixFQUF1QixHQUF2QjtRQUNMLEVBQUEsR0FBSyxrQkFBQSxDQUFtQixFQUFuQixFQUF1QixJQUFDLENBQUEsVUFBRCxDQUFBLENBQXZCO1FBQ0wsSUFBRyxFQUFBLElBQU8sRUFBVjttQkFDSSxJQUFDLENBQUEsc0JBQUQsQ0FBd0IsR0FBRyxDQUFDLE9BQUosQ0FBWSxFQUFaLENBQXhCLEVBREo7O0lBTnFCLENBeEp6QiIsInNvdXJjZXNDb250ZW50IjpbIlxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiMgMDAwMDAwMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwMDAwMDAwICAwMDAgICAgICAwMDAgIDAwMCAgMDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcblxueyBfLCBlbXB0eSwga2xvZywgcG9zdCB9ID0gcmVxdWlyZSAna3hrJ1xuXG5tb2R1bGUuZXhwb3J0cyA9IFxuXG4gICAgYWN0aW9uczpcbiAgICAgICAgbWVudTogJ1NlbGVjdCdcbiAgICAgICAgXG4gICAgICAgIGhpZ2hsaWdodFdvcmRBbmRBZGRUb1NlbGVjdGlvbjpcbiAgICAgICAgICAgIG5hbWU6ICAnSGlnaGxpZ2h0IGFuZCBTZWxlY3QgV29yZCdcbiAgICAgICAgICAgIHRleHQ6ICAnaGlnaGxpZ2h0cyBhbGwgb2NjdXJyZW5jZXMgb2YgdGV4dCBpbiBzZWxlY3Rpb24gb3Igd29yZCBhdCBjdXJzb3IgYW5kIHNlbGVjdHMgdGhlIGZpcnN0fG5leHQgaGlnaGxpZ2h0LidcbiAgICAgICAgICAgIGNvbWJvOiAnY29tbWFuZCtkJ1xuICAgICAgICAgICAgYWNjZWw6ICdjdHJsK2QnXG4gICAgICAgICAgICBcbiAgICAgICAgc2VsZWN0QWxsV29yZHM6XG4gICAgICAgICAgICBuYW1lOiAgJ1NlbGVjdCBBbGwgV29yZHMnXG4gICAgICAgICAgICBjb21ibzogJ2NvbW1hbmQrYWx0K2QnXG4gICAgICAgICAgICBhY2NlbDogJ2FsdCtjdHJsK2QnXG4gICAgICAgICAgICBcbiAgICAgICAgcmVtb3ZlU2VsZWN0ZWRIaWdobGlnaHQ6XG4gICAgICAgICAgICBuYW1lOiAnUmVtb3ZlIEhpZ2hsaWdodGVkIFdvcmQgZnJvbSBTZWxlY3Rpb24nXG4gICAgICAgICAgICB0ZXh0OiAgXCJkb2VzIHRoZSBpbnZlcnNlIG9mICdoaWdobGlnaHQgYW5kIHNlbGVjdCcgd29yZFwiXG4gICAgICAgICAgICBjb21ibzogJ2NvbW1hbmQrc2hpZnQrZCdcbiAgICAgICAgICAgIGFjY2VsOiAnY3RybCtzaGlmdCtkJ1xuICAgICAgICAgICAgXG4gICAgICAgIGhpZ2hsaWdodFRleHRPZlNlbGVjdGlvbk9yV29yZEF0Q3Vyc29yOlxuICAgICAgICAgICAgbmFtZTogICdIaWdobGlnaHQgYW5kIFNlbGVjdCBXb3JkJ1xuICAgICAgICAgICAgdGV4dDogICdoaWdobGlnaHRzIGFsbCBvY2N1cnJlbmNlcyBvZiB0ZXh0IGluIHNlbGVjdGlvbiBvciB3b3JkIGF0IGN1cnNvciBhbmQgc2VsZWN0cyBpdC4gZXhwYW5kcyB0byB0aGUgbGVmdCBpZiBhbHJlYWR5IHNlbGVjdGVkLidcbiAgICAgICAgICAgIGNvbWJvOiAnY29tbWFuZCtlJ1xuICAgICAgICAgICAgYWNjZWw6ICdjdHJsK2UnXG5cbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwMDAwMCAgICAgMDAwMDAgICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgMDAwICAgICAgMDAwICAgICBcbiAgICAjICAgIDAwMCAgICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICBcbiAgICBoaWdobGlnaHRUZXh0OiAodGV4dCwgb3B0KSAtPiAjIGNhbGxlZCBmcm9tIGZpbmQgY29tbWFuZFxuICAgICAgICBcbiAgICAgICAgaGxzID0gQHJhbmdlc0ZvclRleHQgdGV4dCwgb3B0XG4gICAgICAgIGlmIGhscy5sZW5ndGhcbiAgICAgICAgICAgIHN3aXRjaCBvcHQ/LnNlbGVjdFxuICAgICAgICAgICAgICAgIHdoZW4gJ2FmdGVyJyAgdGhlbiBAc2VsZWN0U2luZ2xlUmFuZ2UgcmFuZ2VBZnRlclBvc0luUmFuZ2VzKEBjdXJzb3JQb3MoKSwgaGxzKSA/IF8uZmlyc3QgaGxzXG4gICAgICAgICAgICAgICAgd2hlbiAnYmVmb3JlJyB0aGVuIEBzZWxlY3RTaW5nbGVSYW5nZSByYW5nZUJlZm9yZVBvc0luUmFuZ2VzKEBjdXJzb3JQb3MoKSwgaGxzKSA/IF8uZmlyc3QgaGxzXG4gICAgICAgICAgICAgICAgd2hlbiAnZmlyc3QnICB0aGVuIEBzZWxlY3RTaW5nbGVSYW5nZSBfLmZpcnN0IGhsc1xuICAgICAgICBAc2V0SGlnaGxpZ2h0cyBobHNcbiAgICAgICAgQHJlbmRlckhpZ2hsaWdodHMoKVxuICAgICAgICBAZW1pdCAnaGlnaGxpZ2h0J1xuICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwMDAwMCAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMCAgXG4gICAgIyAwMCAgICAgMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAgICBcbiAgICAgICAgXG4gICAgd29yZEhpZ2hsaWdodHM6IC0+IEBoaWdobGlnaHRzKCkuZmlsdGVyIChoKSAtPiBub3QgaFsyXT8uY2xzcz8uc3RhcnRzV2l0aCgnc3RyaW5nbWF0Y2gnKSBhbmQgbm90IGhbMl0/LmNsc3M/LnN0YXJ0c1dpdGgoJ2JyYWNrZXRtYXRjaCcpXG5cbiAgICBzZWxlY3RBbGxXb3JkczogLT4gIyBjb21tYW5kK2FsdCtkXG4gICAgICAgIFxuICAgICAgICBpZiBAbmFtZSA9PSAnY29tbWFuZGxpbmUtZWRpdG9yJyAjIGhhY2sgdG8gZm9yd2FyZCBhY3Rpb24gdG8gbWFpbiBlZGl0b3JcbiAgICAgICAgICAgIGlmIGVkaXRvciA9IHdpbmRvdy5jb21tYW5kbGluZT8uY29tbWFuZD8ucmVjZWl2aW5nRWRpdG9yKClcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2VsZWN0QWxsV29yZHMoKVxuICAgICAgICAgICAgICAgIGVkaXRvci5mb2N1cygpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgXG4gICAgICAgIEBoaWdobGlnaHRXb3JkQW5kQWRkVG9TZWxlY3Rpb24oKVxuICAgICAgICBAZG8uc3RhcnQoKVxuICAgICAgICBAZG8uc2VsZWN0IEBkby5oaWdobGlnaHRzKClcbiAgICAgICAgaWYgQGRvLm51bVNlbGVjdGlvbnMoKVxuICAgICAgICAgICAgQGRvLnNldEN1cnNvcnMgZW5kUG9zaXRpb25zRnJvbVJhbmdlcyhAZG8uc2VsZWN0aW9ucygpKSwgbWFpbjogJ2Nsb3Nlc3QnXG4gICAgICAgIEBkby5lbmQoKVxuICAgICAgICAgICAgICAgIFxuICAgIGhpZ2hsaWdodFdvcmRBbmRBZGRUb1NlbGVjdGlvbjogKCkgLT4gIyBjb21tYW5kK2RcbiAgICAgICAgXG4gICAgICAgIGNwID0gQGN1cnNvclBvcygpXG4gICAgICAgIHdvcmRIaWdobGlnaHRzID0gQHdvcmRIaWdobGlnaHRzKClcbiAgICAgICAgY3Vyc29ySW5Xb3JkSGlnaGxpZ2h0ID0gd29yZEhpZ2hsaWdodHMubGVuZ3RoIGFuZCByYW5nZUF0UG9zSW5SYW5nZXMgY3AsIHdvcmRIaWdobGlnaHRzXG4gICAgICAgIGlmIG5vdCBjdXJzb3JJbldvcmRIaWdobGlnaHRcbiAgICAgICAgICAgIEBoaWdobGlnaHRUZXh0T2ZTZWxlY3Rpb25PcldvcmRBdEN1cnNvcigpICMgdGhpcyBhbHNvIHNlbGVjdHNcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGRvLnN0YXJ0KClcbiAgICAgICAgICAgIHNyID0gcmFuZ2VBdFBvc0luUmFuZ2VzIGNwLCBAZG8uc2VsZWN0aW9ucygpXG4gICAgICAgICAgICBpZiBzciAjIGN1cnNvciBpbiBzZWxlY3Rpb24gLT4gc2VsZWN0IG5leHQgaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgciA9IHJhbmdlQWZ0ZXJQb3NJblJhbmdlcyBjcCwgd29yZEhpZ2hsaWdodHNcbiAgICAgICAgICAgIGVsc2UgIyBzZWxlY3QgY3VycmVudCBoaWdobGlnaHQgZmlyc3RcbiAgICAgICAgICAgICAgICByID0gcmFuZ2VBdFBvc0luUmFuZ2VzIGNwLCB3b3JkSGlnaGxpZ2h0c1xuICAgICAgICAgICAgciA/PSB3b3JkSGlnaGxpZ2h0c1swXVxuICAgICAgICAgICAgQGFkZFJhbmdlVG9TZWxlY3Rpb24gclxuICAgICAgICAgICAgQGRvLmVuZCgpXG5cbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICBcbiAgICAjICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgaGlnaGxpZ2h0VGV4dE9mU2VsZWN0aW9uT3JXb3JkQXRDdXJzb3I6IC0+ICMgY29tbWFuZCtlICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIGlmIEBudW1TZWxlY3Rpb25zKCkgPT0gMFxuICAgICAgICAgICAgc3JhbmdlID0gQHJhbmdlRm9yUmVhbFdvcmRBdFBvcyBAY3Vyc29yUG9zKClcbiAgICAgICAgICAgIGlmIGVtcHR5IEB0ZXh0SW5SYW5nZShzcmFuZ2UpLnRyaW0oKVxuICAgICAgICAgICAgICAgIEBjbGVhckhpZ2hsaWdodHMoKSAjIG5lZWRlZD9cbiAgICAgICAgICAgICAgICBAc2VsZWN0Tm9uZSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBAc2VsZWN0U2luZ2xlUmFuZ2Ugc3JhbmdlXG4gICAgICAgIFxuICAgICAgICBzZWwgPSBAc2VsZWN0aW9uIDAgICAgIFxuICAgICAgICB0ZXh0ID0gQHRleHRJblJhbmdlIHNlbFxuICAgICAgICBpZiB0ZXh0Lmxlbmd0aFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiBAbnVtSGlnaGxpZ2h0cygpXG4gICAgICAgICAgICAgICAgaWYgdGV4dCA9PSBAdGV4dEluUmFuZ2UgQGhpZ2hsaWdodCAwICMgc2VlIGlmIHdlIGNhbiBncm93IHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICBsYXJnZXJSYW5nZSA9IFtzZWxbMF0sIFtzZWxbMV1bMF0tMSwgc2VsWzFdWzFdXV1cbiAgICAgICAgICAgICAgICAgICAgbGFyZ2VyVGV4dCA9IEB0ZXh0SW5SYW5nZSBsYXJnZXJSYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiBsYXJnZXJUZXh0WzBdIGluIFwiQCMkJSYqKy0hPzouJ1xcXCIvXCIgb3IgL1tBLVphLXpdLy50ZXN0IGxhcmdlclRleHRbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxhcmdlclRleHRbMF0gaW4gXCInXFxcIlwiICMgZ3JvdyBzdHJpbmdzIGluIGJvdGggZGlyZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5yID0gW3NlbFswXSwgW3NlbFsxXVswXS0xLCBzZWxbMV1bMV0rMV1dIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG50ID0gQHRleHRJblJhbmdlIG5yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbnRbbnQubGVuZ3RoLTFdID09IGxhcmdlclRleHRbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyZ2VyVGV4dCA9IG50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlclJhbmdlID0gbnJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgL1tBLVphLXpdLy50ZXN0IGxhcmdlclRleHRbMF0gIyBncm93IHdob2xlIHdvcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgbGFyZ2VyUmFuZ2VbMV1bMF0gPiAwIGFuZCAvW0EtWmEtel0vLnRlc3QgQGxpbmUobGFyZ2VyUmFuZ2VbMF0pW2xhcmdlclJhbmdlWzFdWzBdLTFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlclJhbmdlWzFdWzBdIC09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyZ2VyVGV4dCA9IEB0ZXh0SW5SYW5nZSBsYXJnZXJSYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGxhcmdlclRleHQgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgQG51bVNlbGVjdGlvbnMoKSA9PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2xvZyAnbGFyZ2VyUmFuZ2UgLS0tLS0tLS0tLS0gJyBsYXJnZXJSYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBzZWxlY3RTaW5nbGVSYW5nZSBsYXJnZXJSYW5nZSBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQHNldEhpZ2hsaWdodHMgQHJhbmdlc0ZvclRleHQgdGV4dCwgbWF4Ojk5OTlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIyB0aGlzIHNob3VsZCBiZSBkb25lIHNvbWV3aGVyZSBlbHNlIChjb21tYW5kbGluZSBvciBmaW5kL3NlYXJjaCBjb21tYW5kcylcbiAgICAgICAgICAgIGlmIEByZW5kZXJIaWdobGlnaHRzP1xuICAgICAgICAgICAgICAgIEByZW5kZXJIaWdobGlnaHRzKClcbiAgICAgICAgICAgICAgICBAZW1pdCAnaGlnaGxpZ2h0J1xuICAgICAgICAgICAgICAgIHBvc3QuZW1pdCAnc2VhcmNoVGV4dCcgdGV4dFxuICAgICAgICAgICAgICAgIEBmb2N1cygpXG5cbiAgICAjICAwMDAwMDAwICAwMDAgICAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgIDAwMDAwMDAgIDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgY2xlYXJIaWdobGlnaHRzOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgQG51bUhpZ2hsaWdodHMoKVxuICAgICAgICAgICAgQHNldEhpZ2hsaWdodHMgW11cbiAgICAgICAgICAgIEBlbWl0ICdoaWdobGlnaHQnXG4gICAgICAgICAgICBcbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMDAgIDAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwIDAwMCAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgICAgMCAgICAgIDAwMDAwMDAwICBcbiAgICBcbiAgICByZW1vdmVTZWxlY3RlZEhpZ2hsaWdodDogLT4gIyBjb21tYW5kK3NoaWZ0K2RcbiAgICAgICAgXG4gICAgICAgIGNwID0gQGN1cnNvclBvcygpXG4gICAgICAgIHNlbCA9IEBzZWxlY3Rpb25zKClcbiAgICAgICAgc3IgPSByYW5nZUF0UG9zSW5SYW5nZXMgY3AsIHNlbFxuICAgICAgICBociA9IHJhbmdlQXRQb3NJblJhbmdlcyBjcCwgQGhpZ2hsaWdodHMoKVxuICAgICAgICBpZiBzciBhbmQgaHJcbiAgICAgICAgICAgIEByZW1vdmVTZWxlY3Rpb25BdEluZGV4IHNlbC5pbmRleE9mIHNyIFxuIl19
//# sourceURL=../../../coffee/editor/actions/highlight.coffee