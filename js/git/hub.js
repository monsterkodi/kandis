// koffee 1.4.0

/*
000   000  000   000  0000000    
000   000  000   000  000   000  
000000000  000   000  0000000    
000   000  000   000  000   000  
000   000   0000000   0000000
 */
var Hub, diff, diffs, filter, info, post, ref, root, roots, stati, status, valid, watch, watchers;

ref = require('kxk'), post = ref.post, filter = ref.filter, valid = ref.valid;

watch = require('./watch');

status = require('./status');

diff = require('./diff');

info = require('./info');

root = require('./root');

watchers = {};

roots = {};

stati = {};

diffs = {};

Hub = (function() {
    function Hub() {}

    Hub.refresh = function() {
        stati = {};
        roots = {};
        return diffs = {};
    };

    Hub.watch = function(gitDir) {
        if (watchers[gitDir]) {
            return;
        }
        return watchers[gitDir] = new watch(gitDir, Hub.onGitRefChanged);
    };

    Hub.onGitRefChanged = function(gitDir) {
        delete stati[gitDir];
        diffs = filter(diffs, function(v, k) {
            return !(typeof k.startsWith === "function" ? k.startsWith(gitDir) : void 0);
        });
        return Hub.status(gitDir, function(status) {
            return post.emit('gitStatus', gitDir, status);
        });
    };

    Hub.onSaved = function(file) {
        if (diffs[file]) {
            delete diffs[file];
            Hub.diff(file, function(changes) {
                return post.emit('gitDiff', file, changes);
            });
        }
        return Hub.applyRoot(file, function(gitDir) {
            if (gitDir) {
                return Hub.onGitRefChanged(gitDir);
            }
        });
    };

    Hub.diff = function(file, cb) {
        if (diffs[file]) {
            return cb(diffs[file]);
        } else {
            return diff(file, function(changes) {
                diffs[file] = changes;
                return cb(changes);
            });
        }
    };

    Hub.status = function(dirOrFile, cb) {
        var rootStatus;
        rootStatus = function(cb) {
            return function(gitDir) {
                if (stati[gitDir]) {
                    return cb(stati[gitDir]);
                } else {
                    return status(gitDir, function(info) {
                        stati[gitDir] = info;
                        return cb(info);
                    });
                }
            };
        };
        return Hub.applyRoot(dirOrFile, rootStatus(cb));
    };

    Hub.statusFiles = function(status) {
        var file, files, i, j, key, len, len1, ref1, ref2;
        files = {};
        ref1 = ['changed', 'added', 'dirs'];
        for (i = 0, len = ref1.length; i < len; i++) {
            key = ref1[i];
            if (valid(status[key])) {
                ref2 = status[key];
                for (j = 0, len1 = ref2.length; j < len1; j++) {
                    file = ref2[j];
                    files[file] = key;
                }
            }
        }
        return files;
    };

    Hub.info = function(dirOrFile, cb) {
        var rootInfo;
        rootInfo = function(cb) {
            return function(gitDir) {
                return info(gitDir, function(info) {
                    return cb(info);
                });
            };
        };
        return Hub.applyRoot(dirOrFile, rootInfo(cb));
    };

    Hub.applyRoot = function(dirOrFile, cb) {
        if (roots[dirOrFile]) {
            return cb(roots[dirOrFile]);
        } else {
            return root(dirOrFile, function(gitDir) {
                roots[dirOrFile] = gitDir;
                roots[gitDir] = gitDir;
                Hub.watch(gitDir);
                return cb(gitDir);
            });
        }
    };

    return Hub;

})();

post.on('saved', Hub.onSaved);

module.exports = Hub;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHViLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUEwQixPQUFBLENBQVEsS0FBUixDQUExQixFQUFFLGVBQUYsRUFBUSxtQkFBUixFQUFnQjs7QUFFaEIsS0FBQSxHQUFXLE9BQUEsQ0FBUSxTQUFSOztBQUNYLE1BQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFDWCxJQUFBLEdBQVcsT0FBQSxDQUFRLFFBQVI7O0FBQ1gsSUFBQSxHQUFXLE9BQUEsQ0FBUSxRQUFSOztBQUNYLElBQUEsR0FBVyxPQUFBLENBQVEsUUFBUjs7QUFFWCxRQUFBLEdBQVc7O0FBQ1gsS0FBQSxHQUFXOztBQUNYLEtBQUEsR0FBVzs7QUFDWCxLQUFBLEdBQVc7O0FBRUw7OztJQUVGLEdBQUMsQ0FBQSxPQUFELEdBQVUsU0FBQTtRQUVOLEtBQUEsR0FBUTtRQUNSLEtBQUEsR0FBUTtlQUNSLEtBQUEsR0FBUTtJQUpGOztJQVlWLEdBQUMsQ0FBQSxLQUFELEdBQVEsU0FBQyxNQUFEO1FBRUosSUFBVSxRQUFTLENBQUEsTUFBQSxDQUFuQjtBQUFBLG1CQUFBOztlQUNBLFFBQVMsQ0FBQSxNQUFBLENBQVQsR0FBbUIsSUFBSSxLQUFKLENBQVUsTUFBVixFQUFrQixHQUFHLENBQUMsZUFBdEI7SUFIZjs7SUFLUixHQUFDLENBQUEsZUFBRCxHQUFrQixTQUFDLE1BQUQ7UUFFZCxPQUFPLEtBQU0sQ0FBQSxNQUFBO1FBRWIsS0FBQSxHQUFRLE1BQUEsQ0FBTyxLQUFQLEVBQWMsU0FBQyxDQUFELEVBQUcsQ0FBSDttQkFDbEIsdUNBQUksQ0FBQyxDQUFDLFdBQVk7UUFEQSxDQUFkO2VBR1IsR0FBRyxDQUFDLE1BQUosQ0FBVyxNQUFYLEVBQW1CLFNBQUMsTUFBRDttQkFDZixJQUFJLENBQUMsSUFBTCxDQUFVLFdBQVYsRUFBc0IsTUFBdEIsRUFBOEIsTUFBOUI7UUFEZSxDQUFuQjtJ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ICAwMDAgICAwMDAgIDAwMDAwMDAgICAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbjAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4wMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICBcbiMjI1xuXG57IHBvc3QsIGZpbHRlciwgdmFsaWQgfSA9IHJlcXVpcmUgJ2t4aydcblxud2F0Y2ggICAgPSByZXF1aXJlICcuL3dhdGNoJ1xuc3RhdHVzICAgPSByZXF1aXJlICcuL3N0YXR1cydcbmRpZmYgICAgID0gcmVxdWlyZSAnLi9kaWZmJ1xuaW5mbyAgICAgPSByZXF1aXJlICcuL2luZm8nXG5yb290ICAgICA9IHJlcXVpcmUgJy4vcm9vdCdcblxud2F0Y2hlcnMgPSB7fVxucm9vdHMgICAgPSB7fVxuc3RhdGkgICAgPSB7fVxuZGlmZnMgICAgPSB7fVxuXG5jbGFzcyBIdWJcbiAgICBcbiAgICBAcmVmcmVzaDogLT4gXG4gICAgICAgIFxuICAgICAgICBzdGF0aSA9IHt9XG4gICAgICAgIHJvb3RzID0ge31cbiAgICAgICAgZGlmZnMgPSB7fVxuICAgIFxuICAgICMgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiAgICAjIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4gICAgIyAwMCAgICAgMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICBcbiAgICBAd2F0Y2g6IChnaXREaXIpIC0+XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaWYgd2F0Y2hlcnNbZ2l0RGlyXVxuICAgICAgICB3YXRjaGVyc1tnaXREaXJdID0gbmV3IHdhdGNoIGdpdERpciwgSHViLm9uR2l0UmVmQ2hhbmdlZFxuICAgICAgICAgICAgXG4gICAgQG9uR2l0UmVmQ2hhbmdlZDogKGdpdERpcikgLT5cbiAgICAgICAgXG4gICAgICAgIGRlbGV0ZSBzdGF0aVtnaXREaXJdXG4gICAgICAgIFxuICAgICAgICBkaWZmcyA9IGZpbHRlciBkaWZmcywgKHYsaykgLT4gXG4gICAgICAgICAgICBub3Qgay5zdGFydHNXaXRoPyBnaXREaXJcbiAgICAgICAgICAgIFxuICAgICAgICBIdWIuc3RhdHVzIGdpdERpciwgKHN0YXR1cykgLT4gXG4gICAgICAgICAgICBwb3N0LmVtaXQgJ2dpdFN0YXR1cycgZ2l0RGlyLCBzdGF0dXNcbiAgICAgICAgXG4gICAgQG9uU2F2ZWQ6IChmaWxlKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgZGlmZnNbZmlsZV1cbiAgICAgICAgICAgIGRlbGV0ZSBkaWZmc1tmaWxlXVxuICAgICAgICAgICAgSHViLmRpZmYgZmlsZSwgKGNoYW5nZXMpIC0+IFxuICAgICAgICAgICAgICAgIHBvc3QuZW1pdCAnZ2l0RGlmZicgZmlsZSwgY2hhbmdlc1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBIdWIuYXBwbHlSb290IGZpbGUsIChnaXREaXIpIC0+XG4gICAgICAgICAgICBIdWIub25HaXRSZWZDaGFuZ2VkIGdpdERpciBpZiBnaXREaXJcbiAgICAgICAgXG4gICAgIyAwMDAwMDAwICAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgIDAwMDAwMCAgICAwMDAwMDAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAgICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIFxuICAgIFxuICAgIEBkaWZmOiAoZmlsZSwgY2IpIC0+XG4gICAgICAgICAgICAgICBcbiAgICAgICAgaWYgZGlmZnNbZmlsZV1cbiAgICAgICAgICAgIGNiIGRpZmZzW2ZpbGVdXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRpZmYgZmlsZSwgKGNoYW5nZXMpIC0+IFxuICAgICAgICAgICAgICAgIGRpZmZzW2ZpbGVdID0gY2hhbmdlc1xuICAgICAgICAgICAgICAgIGNiIGNoYW5nZXNcbiAgICBcbiAgICAjICAwMDAwMDAwICAwMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICBcbiAgICAjIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICAjICAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgICAgICAgMDAwICBcbiAgICAjIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICBcbiAgICBcbiAgICBAc3RhdHVzOiAoZGlyT3JGaWxlLCBjYikgLT5cbiAgICAgICAgXG4gICAgICAgIHJvb3RTdGF0dXMgPSAoY2IpIC0+IChnaXREaXIpIC0+XG4gICAgICAgICAgICBpZiBzdGF0aVtnaXREaXJdXG4gICAgICAgICAgICAgICAgY2Igc3RhdGlbZ2l0RGlyXVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHN0YXR1cyBnaXREaXIsIChpbmZvKSAtPiBcbiAgICAgICAgICAgICAgICAgICAgc3RhdGlbZ2l0RGlyXSA9IGluZm9cbiAgICAgICAgICAgICAgICAgICAgY2IgaW5mb1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgSHViLmFwcGx5Um9vdCBkaXJPckZpbGUsIHJvb3RTdGF0dXMgY2JcbiAgICAgICAgICAgICAgXG4gICAgQHN0YXR1c0ZpbGVzOiAoc3RhdHVzKSAtPlxuICAgICAgICBcbiAgICAgICAgZmlsZXMgPSB7fVxuICAgICAgICBmb3Iga2V5IGluIFsnY2hhbmdlZCcgJ2FkZGVkJyAnZGlycyddXG4gICAgICAgICAgICBpZiB2YWxpZCBzdGF0dXNba2V5XVxuICAgICAgICAgICAgICAgIGZvciBmaWxlIGluIHN0YXR1c1trZXldXG4gICAgICAgICAgICAgICAgICAgIGZpbGVzW2ZpbGVdID0ga2V5XG4gICAgICAgIGZpbGVzXG4gICAgICAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgICMgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAwMDAgMCAwMDAgIDAwMDAwMCAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuICAgICMgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwMDAwMCAgIFxuICAgIFxuICAgIEBpbmZvOiAoZGlyT3JGaWxlLCBjYikgLT5cbiAgICAgICAgXG4gICAgICAgIHJvb3RJbmZvID0gKGNiKSAtPiAoZ2l0RGlyKSAtPiBpbmZvIGdpdERpciwgKGluZm8pIC0+IGNiIGluZm9cbiAgICAgICAgXG4gICAgICAgIEh1Yi5hcHBseVJvb3QgZGlyT3JGaWxlLCByb290SW5mbyBjYlxuICAgICAgICBcbiAgICAjICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgICAgIDAwMCAgIDAwMCAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwIDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuICAgICMgMDAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMCAgICAgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgIDAwMCAgICAgICAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICAwMDAwMDAwICAgICAwMDAgICAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAgICAwMDAgICAgIFxuICAgIFxuICAgIEBhcHBseVJvb3Q6IChkaXJPckZpbGUsIGNiKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgcm9vdHNbZGlyT3JGaWxlXVxuICAgICAgICAgICAgY2Igcm9vdHNbZGlyT3JGaWxlXVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByb290IGRpck9yRmlsZSwgKGdpdERpcikgLT5cbiAgICAgICAgICAgICAgICByb290c1tkaXJPckZpbGVdID0gZ2l0RGlyXG4gICAgICAgICAgICAgICAgcm9vdHNbZ2l0RGlyXSAgICA9IGdpdERpclxuICAgICAgICAgICAgICAgIEh1Yi53YXRjaCBnaXREaXJcbiAgICAgICAgICAgICAgICBjYiBnaXREaXIgICBcbiAgICAgICAgICAgIFxucG9zdC5vbiAnc2F2ZWQnIEh1Yi5vblNhdmVkXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBIdWJcbiJdfQ==
//# sourceURL=../../coffee/git/hub.coffee